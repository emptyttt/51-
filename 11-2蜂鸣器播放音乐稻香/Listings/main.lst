C51 COMPILER V9.60.7.0   MAIN                                                              08/17/2024 22:49:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Program Files\keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Timer0.h"
   4          
   5          sbit Buzzer=P2^5;
   6          
   7          #define SPEED  500 
   8          #define P       0
   9          #define L1              1
  10          #define L1_     2
  11          #define L2              3
  12          #define L2_     4
  13          #define L3      5
  14          #define L4      6
  15          #define L4_     7
  16          #define L5      8
  17          #define L5_     9
  18          #define L6      10
  19          #define L6_     11
  20          #define L7      12
  21          #define M1      13
  22          #define M1_     14
  23          #define M2      15
  24          #define M2_     16
  25          #define M3      17
  26          #define M4      18
  27          #define M4_     19
  28          #define M5      20
  29          #define M5_     21
  30          #define M6      22
  31          #define M6_     23
  32          #define M7      24
  33          #define H1      25
  34          #define H1_     26
  35          #define H2      27
  36          #define H2_     28
  37          #define H3      29
  38          #define H4      30
  39          #define H4_     31
  40          #define H5      32
  41          #define H5_     33
  42          #define H6      34
  43          #define H6_     35
  44          #define H7      36
  45          
  46          
  47          unsigned char KeyNum;
  48          
  49          unsigned int FreqTable[]={0,
  50                  63777,63872,63967,64053,64139,64214,64290,64359,64424,64488,64546,64606,
  51                  64654,64703,64750,64794,64836,64875,64912,64947,64980,65012,65041,65069,
  52                  65094,65119,65142,65165,65186,65205,65223,65241,65258,65273,65288,65302
  53          };
  54          unsigned char code Music[]=
C51 COMPILER V9.60.7.0   MAIN                                                              08/17/2024 22:49:29 PAGE 2   

  55          {
  56                  0,4,
  57                  0,4,
  58                  0,4,
  59                  0,1,
  60                  M1,1,
  61                  M1,1,
  62                  L6,1,
  63                  
  64                  M1,2,
  65                  L6,1,
  66                  M1,3,
  67                  M1,1,
  68                  M2,1,
  69                  M2,1,
  70                  M2,1,
  71                  M2,1,
  72                  M2,1,
  73                  M2,1,
  74                  M3,1,
  75                  M1,2,
  76                  
  77                  M1,2,
  78                  L6,1,
  79                  M1,3,
  80                  M1,1,
  81                  M2,1,
  82                  M2,1,
  83                  M2,1,
  84                  M2,1,
  85                  M2,1,
  86                  M2,1,
  87                  M3,1,
  88                  M1,2,
  89                  
  90                  M1,2,
  91                  L6,1,
  92                  M1,3,
  93                  M1,1,
  94                  M1,1,
  95                  M2,1,
  96                  M2,1,
  97                  M2,1,
  98                  M2,1,
  99                  M1,2,
 100                  M2,1,
 101                  M3,1,
 102                  
 103                  
 104          
 105                  0xFF
 106          };
 107          unsigned int FreqSelect,MusicSelect;
 108          
 109          void main()
 110          {
 111   1              Timer0_Init();
 112   1              while(1)
 113   1              {
 114   2                      if(Music[MusicSelect]!=0xFF)
 115   2                      {
 116   3                              FreqSelect=Music[MusicSelect];
C51 COMPILER V9.60.7.0   MAIN                                                              08/17/2024 22:49:29 PAGE 3   

 117   3                              MusicSelect++;
 118   3                              Delay(SPEED/4*Music[MusicSelect]);
 119   3                              MusicSelect++;
 120   3                              TR0=0;
 121   3                              Delay(5);
 122   3                              TR0=1;
 123   3                      }
 124   2                      else
 125   2                      {
 126   3                              TR0=0;
 127   3                              while(1);
 128   3                      }
 129   2              }
 130   1      }
 131          
 132          void Timer0_Routine() interrupt 1
 133          {
 134   1              TL0 = FreqTable[FreqSelect]%256;                                //设置定时初始值
 135   1              TH0 = FreqTable[FreqSelect]/256;                                //设置定时初始值
 136   1              Buzzer=!Buzzer;//1ms翻转一次，周期2ms，产生了500hz的频率
 137   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    119    ----
   CONSTANT SIZE    =     87    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     79    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
